<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xmlns:sede="http://www.zaragoza.es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <sede:meta title="Contratación Pública" keywords="sede,web,perfil,contratos,ayuntamiento,zaragoza,contratación" />
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css"/>
  <style>
      .slider {
      display: inline-block;
      vertical-align: middle;
      position: relative;
      }
      .slider.slider-horizontal {
      width: 210px;
      height: 20px;
      }
      .slider.slider-horizontal .slider-track {
      height: 10px;
      width: 100%;
      margin-top: -5px;
      top: 50%;
      left: 0;
      }
      .slider.slider-horizontal .slider-selection,
      .slider.slider-horizontal .slider-track-low,
      .slider.slider-horizontal .slider-track-high {
      height: 100%;
      top: 0;
      bottom: 0;
      }
      .slider.slider-horizontal .slider-tick,
      .slider.slider-horizontal .slider-handle {
      margin-left: -10px;
      }
      .slider.slider-horizontal .slider-tick.triangle,
      .slider.slider-horizontal .slider-handle.triangle {
      position: relative;
      top: 50%;
      -ms-transform: translateY(-50%);
      transform: translateY(-50%);
      border-width: 0 10px 10px 10px;
      width: 0;
      height: 0;
      border-bottom-color: #2e6da4;
      margin-top: 0;
      }
      .slider.slider-horizontal .slider-tick-container {
      white-space: nowrap;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      }
      .slider.slider-horizontal .slider-tick-label-container {
      white-space: nowrap;
      margin-top: 20px;
      }
      .slider.slider-horizontal .slider-tick-label-container .slider-tick-label {
      padding-top: 4px;
      display: inline-block;
      text-align: center;
      }
      .slider.slider-horizontal .tooltip {
      -ms-transform: translateX(-50%);
      transform: translateX(-50%);
      }
      .slider.slider-horizontal.slider-rtl .slider-track {
      left: initial;
      right: 0;
      }
      .slider.slider-horizontal.slider-rtl .slider-tick,
      .slider.slider-horizontal.slider-rtl .slider-handle {
      margin-left: initial;
      margin-right: -10px;
      }
      .slider.slider-horizontal.slider-rtl .slider-tick-container {
      left: initial;
      right: 0;
      }
      .slider.slider-horizontal.slider-rtl .tooltip {
      -ms-transform: translateX(50%);
      transform: translateX(50%);
      }
      .slider.slider-vertical {
      height: 210px;
      width: 20px;
      }
      .slider.slider-vertical .slider-track {
      width: 10px;
      height: 100%;
      left: 25%;
      top: 0;
      }
      .slider.slider-vertical .slider-selection {
      width: 100%;
      left: 0;
      top: 0;
      bottom: 0;
      }
      .slider.slider-vertical .slider-track-low,
      .slider.slider-vertical .slider-track-high {
      width: 100%;
      left: 0;
      right: 0;
      }
      .slider.slider-vertical .slider-tick,
      .slider.slider-vertical .slider-handle {
      margin-top: -10px;
      }
      .slider.slider-vertical .slider-tick.triangle,
      .slider.slider-vertical .slider-handle.triangle {
      border-width: 10px 0 10px 10px;
      width: 1px;
      height: 1px;
      border-left-color: #2e6da4;
      border-right-color: #2e6da4;
      margin-left: 0;
      margin-right: 0;
      }
      .slider.slider-vertical .slider-tick-label-container {
      white-space: nowrap;
      }
      .slider.slider-vertical .slider-tick-label-container .slider-tick-label {
      padding-left: 4px;
      }
      .slider.slider-vertical .tooltip {
      -ms-transform: translateY(-50%);
      transform: translateY(-50%);
      }
      .slider.slider-vertical.slider-rtl .slider-track {
      left: initial;
      right: 25%;
      }
      .slider.slider-vertical.slider-rtl .slider-selection {
      left: initial;
      right: 0;
      }
      .slider.slider-vertical.slider-rtl .slider-tick.triangle,
      .slider.slider-vertical.slider-rtl .slider-handle.triangle {
      border-width: 10px 10px 10px 0;
      }
      .slider.slider-vertical.slider-rtl .slider-tick-label-container .slider-tick-label {
      padding-left: initial;
      padding-right: 4px;
      }
      .slider.slider-disabled .slider-handle {
      background-image: -webkit-linear-gradient(top, #dfdfdf 0%, #bebebe 100%);
      background-image: -o-linear-gradient(top, #dfdfdf 0%, #bebebe 100%);
      background-image: linear-gradient(to bottom, #dfdfdf 0%, #bebebe 100%);
      background-repeat: repeat-x;
      filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffdfdfdf', endColorstr='#ffbebebe', GradientType=0);
      }
      .slider.slider-disabled .slider-track {
      background-image: -webkit-linear-gradient(top, #e5e5e5 0%, #e9e9e9 100%);
      background-image: -o-linear-gradient(top, #e5e5e5 0%, #e9e9e9 100%);
      background-image: linear-gradient(to bottom, #e5e5e5 0%, #e9e9e9 100%);
      background-repeat: repeat-x;
      filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffe5e5e5', endColorstr='#ffe9e9e9', GradientType=0);
      cursor: not-allowed;
      }
      .slider input {
      display: none;
      }
      .slider .tooltip {
      pointer-events: none;
      }
      .slider .tooltip.top {
      margin-top: -36px;
      }
      .slider .tooltip-inner {
      white-space: nowrap;
      max-width: none;
      }
      .slider .hide {
      display: none;
      }
      .slider-track {
      position: absolute;
      cursor: pointer;
      background-image: -webkit-linear-gradient(top, #f5f5f5 0%, #f9f9f9 100%);
      background-image: -o-linear-gradient(top, #f5f5f5 0%, #f9f9f9 100%);
      background-image: linear-gradient(to bottom, #f5f5f5 0%, #f9f9f9 100%);
      background-repeat: repeat-x;
      filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff5f5f5', endColorstr='#fff9f9f9', GradientType=0);
      -webkit-box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
      box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
      border-radius: 4px;
      }
      .slider-selection {
      position: absolute;
      background-image: -webkit-linear-gradient(top, #f9f9f9 0%, #f5f5f5 100%);
      background-image: -o-linear-gradient(top, #f9f9f9 0%, #f5f5f5 100%);
      background-image: linear-gradient(to bottom, #f9f9f9 0%, #f5f5f5 100%);
      background-repeat: repeat-x;
      filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff9f9f9', endColorstr='#fff5f5f5', GradientType=0);
      -webkit-box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.15);
      box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.15);
      -webkit-box-sizing: border-box;
      -moz-box-sizing: border-box;
      box-sizing: border-box;
      border-radius: 4px;
      }
      .slider-selection.tick-slider-selection {

      }
      .slider-track-low,
      .slider-track-high {
      position: absolute;
      background: transparent;
      -webkit-box-sizing: border-box;
      -moz-box-sizing: border-box;
      box-sizing: border-box;
      border-radius: 4px;
      }
      .slider-handle {
      position: absolute;
      top: 0;
      width: 20px;
      height: 20px;
      background-color: #E81B16;
      background-image: -webkit-linear-gradient(top, #E81B16 0%, #E81B16 100%);
      background-image: -o-linear-gradient(top, #E81B16 0%, #E81B16 100%);
      background-image: linear-gradient(to bottom, #E81B16 0%, #E81B16 100%);
      background-repeat: repeat-x;
      filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff337ab7', endColorstr='#ff2e6da4', GradientType=0);
      filter: none;
      -webkit-box-shadow: inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);
      border: 0px solid transparent;
      }
      .slider-handle:hover {
      cursor: pointer;
      }
      .slider-handle.round {
      border-radius: 50%;
      }
      .slider-handle.triangle {
      background: transparent none;
      }
      .slider-handle.custom {
      background: transparent none;
      }
      .slider-handle.custom::before {
      line-height: 20px;
      font-size: 20px;
      content: '\2605';
      color: #726204;
      }
      .slider-tick {
      position: absolute;
      cursor: pointer;
      width: 20px;
      height: 20px;
      background-image: -webkit-linear-gradient(top, #f9f9f9 0%, #f5f5f5 100%);
      background-image: -o-linear-gradient(top, #f9f9f9 0%, #f5f5f5 100%);
      background-image: linear-gradient(to bottom, #f9f9f9 0%, #f5f5f5 100%);
      background-repeat: repeat-x;
      filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff9f9f9', endColorstr='#fff5f5f5', GradientType=0);
      -webkit-box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.15);
      box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.15);
      -webkit-box-sizing: border-box;
      -moz-box-sizing: border-box;
      box-sizing: border-box;
      filter: none;
      opacity: 0.8;
      border: 0px solid transparent;
      }
      .slider-tick.round {
      border-radius: 50%;
      }
      .slider-tick.triangle {
      background: transparent none;
      }
      .slider-tick.custom {
      background: transparent none;
      }
      .slider-tick.custom::before {
      line-height: 20px;
      font-size: 20px;
      content: '\2605';
      color: #726204;
      }
      .slider-tick.in-selection {

      }


      body {
      padding-top: 57px;
      }
      ul#menu {
      border-bottom: 2px solid #E81B16;
      border: 1px solid #CCC;
      font-weight: bold;
      margin-bottom: 1em;
      border-radius: 0 0 .5em .5em;
      }
      ul#menu .elemento {
      display: block;
      padding: 10px 15px;
      margin: 0;
      font-size: 1em;
      font-weight: bold;
      line-height: 1.42857143;
      }
      #group-everything-by{
      margin: 5px 0 5px 0;
      }
      #color-everything-by{
      margin: 5px 0 5px 0;
      }
      #svg_vis{
      overflow: inherit!important;
      margin-top:170px;
      }
      .top_labels {
      font-family: 'Open Sans';
      font-size: 16px;
      text-anchor: end;
      alignment-baseline: text-before-edge;
      color:#E81B16;
      }
      .tooltipBubble{
      position: absolute;
      top: 100px;
      left: 100px;
      -moz-border-radius:2px;
      border-radius: 20px;
      /*border: 1px solid #000;*/
      /*background: #f6f6f6;*/
      background: white;
      opacity: 1;
      /* color: #eeeeee; */
      color: black;
      padding: 10px;
      width: 300px;
      font-size: 10px;
      z-index: 10;
      }
      .bubbleDiv{
      margin-top: 20px;
      border: none;
      margin-bottom: 20px;
      position: relative;
      min-height: 20px;
      padding: 0px;
      background-color: #ffffff;

      }
      #datosContratosAnyo{
      background-color:#E81B16;
      border-radius: 20px;
      padding-bottom:20px;
      }
      #datosContratosAnyo h3{
      text-align:center;
      margin-bottom: 20px;
      font-size: 25px;
      font-weight: 600;
      color: #ffffff;

      }
      #datosContratosAnyo h5{
      text-align:center;
      margin-bottom: 20px;
      font-size: 17px;
      font-weight: 600;
      color: #ffffff;
      }
      #datosContratosAnyo i{
      margin-right:5px;
      }
      .stat{
      font-size:25px;
      text-align: center;
      color: #ffffff;
      }
      .svg-container {
      display: inline-block;
      position: relative;
      width: 100%;
      vertical-align: top;
      margin-top: 200px;
      margin-bottom: 200px;
      }
      .highcharts-credits{
        display:none !important;
      }
      .panel-default>.panel-heading {
          font-weight: bold;
          color: #FFF;
          background: #D01715;
      }

      .panel-heading a:after {
          color: #FFF;
      }

      .panel {
          border-color: #0e3944;
      }

      hr {
          border-color: #0e3944;
      }

      .color-1 {
          color: #05760B;
      }

      .color-2 {
          color: #006BA8;
      }

      .color-3 {
          color: #FF9900;
      }

      .label.label-info {
          font-size: 0.9em;
      }

      .card-description {
          border-left: 3px solid #D01715;
      }

      /* Timeline */
      .timeline,
      .timeline-horizontal {
          list-style: none;
          padding: 20px;
          position: relative;
      }

      .timeline:before {
          top: 40px;
          bottom: 0;
          position: absolute;
          content: " ";
          width: 3px;
          background-color: #eeeeee;
          left: 50%;
          margin-left: -1.5px;
      }

      .timeline .timeline-item {
          margin-bottom: 20px;
          position: relative;
      }

      .timeline .timeline-item:before,
      .timeline .timeline-item:after {
          content: "";
          display: table;
      }

      .timeline .timeline-item:after {
          clear: both;
      }

      .timeline .timeline-item .timeline-badge {
          color: #fff;
          width: 54px;
          height: 54px;
          line-height: 52px;
          font-size: 22px;
          text-align: center;
          position: absolute;
          top: 18px;
          left: 50%;
          margin-left: -25px;
          background-color: #7c7c7c;
          border: 3px solid #ffffff;
          z-index: 100;
          border-top-right-radius: 50%;
          border-top-left-radius: 50%;
          border-bottom-right-radius: 50%;
          border-bottom-left-radius: 50%;
      }

      .timeline .timeline-item .timeline-badge i,
      .timeline .timeline-item .timeline-badge .fa,
      .timeline .timeline-item .timeline-badge .glyphicon {
          top: 2px;
          left: 0px;
      }

      .timeline .timeline-item .timeline-badge.primary {
          background-color: #1f9eba;
      }

      .timeline .timeline-item .timeline-badge.info {
          background-color: #5bc0de;
      }

      .timeline .timeline-item .timeline-badge.success {
          background-color: #59ba1f;
      }

      .timeline .timeline-item .timeline-badge.warning {
          background-color: #d1bd10;
      }

      .timeline .timeline-item .timeline-badge.danger {
          background-color: #ba1f1f;
      }

      .timeline .timeline-item .timeline-panel {
          position: relative;
          width: 46%;
          float: left;
          right: 16px;
          border: 1px solid #c0c0c0;
          background: #ffffff;
          border-radius: 2px;
          padding: 20px;
          -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
          box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
      }

      .timeline .timeline-item .timeline-panel:before {
          position: absolute;
          top: 26px;
          right: -16px;
          display: inline-block;
          border-top: 16px solid transparent;
          border-left: 16px solid #c0c0c0;
          border-right: 0 solid #c0c0c0;
          border-bottom: 16px solid transparent;
          content: " ";
      }

      .timeline .timeline-item .timeline-panel .timeline-title {
          margin-top: 0;
          color: inherit;
          border-bottom: 1px solid #0e3944;
      }

      .timeline .timeline-item .timeline-panel .timeline-body>p,
      .timeline .timeline-item .timeline-panel .timeline-body>ul {
          margin-bottom: 0;
      }

      .timeline .timeline-item .timeline-panel .timeline-body>p+p {
          margin-top: 5px;
      }

      .timeline .timeline-item:last-child:nth-child(even) {
          float: right;
      }

      .timeline .timeline-item:nth-child(even) .timeline-panel {
          float: right;
          left: 16px;
      }

      .timeline .timeline-item:nth-child(even) .timeline-panel:before {
          border-left-width: 0;
          border-right-width: 14px;
          left: -14px;
          right: auto;
      }

      .timeline-horizontal {
          list-style: none;
          position: relative;
          padding: 20px 0px 20px 0px;
          display: inline-block;
      }

      .timeline-horizontal:before {
          height: 3px;
          top: auto;
          bottom: 26px;
          left: 56px;
          right: 0;
          width: 100%;
          margin-bottom: 20px;
      }

      .timeline-horizontal .timeline-item {
          display: table-cell;
          height: 280px;
          width: 20%;
          min-width: 320px;
          float: none !important;
          padding-left: 0px;
          padding-right: 20px;
          margin: 0 auto;
          vertical-align: bottom;
      }

      .timeline-horizontal .timeline-item .timeline-panel {
          top: auto;
          bottom: 64px;
          display: inline-block;
          float: none !important;
          left: 0 !important;
          right: 0 !important;
          width: 100%;
          margin-bottom: 20px;
      }

      .timeline-horizontal .timeline-item .timeline-panel:before {
          top: auto;
          bottom: -16px;
          left: 28px !important;
          right: auto;
          border-right: 16px solid transparent !important;
          border-top: 16px solid #c0c0c0 !important;
          border-bottom: 0 solid #c0c0c0 !important;
          border-left: 16px solid transparent !important;
      }

      .timeline-horizontal .timeline-item:before,
      .timeline-horizontal .timeline-item:after {
          display: none;
      }

      .timeline-horizontal .timeline-item .timeline-badge {
          top: auto;
          bottom: 0px;
          left: 43px;
      }

      .right-ribbon {
          position: relative;
          background: #EEE;
          border: 1px solid #CCC;
          box-shadow: 0px 1px 3px rgba(0, 0, 0, .2);
          padding: 10px 15px;
          clear: both;
          margin-right: -38px;
          float: right;
      }

      .right-ribbon::before {
          display: block;
          width: 10px;
          height: 0px;
          position: absolute;
          bottom: -10px;
          right: -1px;
          content: "";
          border-bottom: 10px solid transparent;
          border-left: 10px solid #757575;
      }
      .title{
      color:#D01715
      }
      @media only screen and (max-width: 1280) {
      #svg_vis {
      overflow: inherit!important;
      margin-top: 100px;
      }
      }
  </style>
</head>
<body>
    <sede:content>
        <th:block th:include="fragmentos/error"/>
        <div class="col-md-12">
            <h2 class="title" property="name" th:text="${indicadores_Ayutamiento.body.title}+' '+${indicadores_Ayutamiento.body.anyo}"></h2>
            <input type="hidden" id="anyoSlider" th:value="${indicadores_Ayutamiento.body.anyo}"/>
            <hr/>          
        </div>
        <div th:if="${indicadores_Ayutamiento.statusCode.value()} == 200" th:object="${indicadores_Ayutamiento.body}" vocab="http://schema.org/">
            <form id="BuscadorIndicadores" method="get">
                <div class="panel panel-default">
                    <div class="clearfix padding-a1em">
                     <div class="form-group col-md-4">
                            <label for="entity" class="control-label col-md-3">Entidad: </label>
                            <div class="col-md-9">
                                <select id="entity" name="idPortal" class="form-control">
                                    <option th:selected="${indicadores_Ayutamiento.body.id == 11}" value="11">Artes Escénicas y de la Imagen</option>
                                    <option th:selected="${indicadores_Ayutamiento.body.id == 5}" value="5">Audiorama Zaragoza</option>
                                    <option th:selected="${indicadores_Ayutamiento.body.id == 1}" value="1">Ayuntamiento de Zaragoza</option>
                                    <option th:selected="${indicadores_Ayutamiento.body.id == 14}" value="14">Ecociudad</option>
                                    <option th:selected="${indicadores_Ayutamiento.body.id == 4}" value="4">Educación y Bibliotecas</option>
                                    <option th:selected="${indicadores_Ayutamiento.body.id == 2}" value="2">Zaragoza Cultural</option>
                                    <option th:selected="${indicadores_Ayutamiento.body.id == 8}" value="8">Zaragoza Deporte</option>
                                    <option th:selected="${indicadores_Ayutamiento.body.id == 7}" value="7">Zaragoza Dinámica</option>
                                    <option th:selected="${indicadores_Ayutamiento.body.id == 12}" value="12">Zaragoza Pirineos</option>
                                    <option th:selected="${indicadores_Ayutamiento.body.id == 6}" value="6">Zaragoza Turismo</option>
                                    <option th:selected="${indicadores_Ayutamiento.body.id == 3}" value="3">Zaragoza Vivienda</option>
                                    <option th:selected="${indicadores_Ayutamiento.body.id == 10}" value="10">ZGZ @ Desarrollo Expo, S.A., en liquidación</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group col-md-4" id="servicioDiv" style="display:none;">
                            <label for="servicio" class="control-label col-md-3">Servicio:</label>
                            <div class="col-md-9">
                                <input type="text" id="servicio" value="" autocomplete="off"
                                       placeholder="Buscar servicio" class="form-control"
                                       title="Buscar servicio" disabled="disabled"/>
                                <input type="hidden" id="servicioGestor" name="idServicio"/>
                            </div>
                        </div>
                       <div class="form-group col-md-4">
                            <label for="anyo" class="control-label col-md-3"> Año:</label>
                            <input id="anyo" name="anyo" type="text" />
                        </div>
                        <div class="col-xs-12 col-md-1">
                            <input type="submit" id="enviar" value="Consultar" class="btn btn-primary"></input>
                        </div>
                    </div>
                </div>
            </form>
        </div>      
        <div class="container-fluid">
            <div class="col-md-3 clearfix" style="float:right">
                <p class="nomargin destacado text-right">
                    Descargar: <a href="https://www.zaragoza.es/sede/servicio/catalogo/147">Datos Abiertos</a>
                </p>
                <ul class="list-inline pull-right">
                    <li class="nopadding"><a th:href="'/sede/servicio/contratacion-publica/indicadores.json?' + ${#httpServletRequest.getQueryString() != null ? #httpServletRequest.getQueryString()  :  ''}">JSON</a> | </li>
                    <li class="nopadding"><a th:href="'/sede/servicio/contratacion-publica/indicadores.xml?' + ${#httpServletRequest.getQueryString() != null ? #httpServletRequest.getQueryString()  :  ''}">XML</a> | </li>
                    <li class="nopadding"><a th:href="'/sede/servicio/contratacion-publica/indicadores.csv?' + ${#httpServletRequest.getQueryString() != null ? #httpServletRequest.getQueryString()  :  ''}">CSV</a></li>
                </ul>
            </div>
        </div>
        <div class="row">
            <div id="datosContratosAnyo">
                <div class="row">
                    <div class="col-md-6">
                        <h3>Gastos</h3>
                        <div class="col-md-5">
                            <h5><i class="fas fa-coins"></i>Cuantía:</h5>
                                <p class="stat" th:text="${#numbers.formatDecimal(indicadores_Ayutamiento.body.cuantia,3,'POINT',2,'COMMA')+' €'}"></p>
                        </div>
                        <div class="col-md-3">
                            <h5><i class="fas fa-file-signature"></i>Contratos:</h5>
                            <p class="stat" th:text="${indicadores_Ayutamiento.body.contratos.totalCount}"></p>
                        </div>
                        <div class="col-md-4">
                            <h5><i class="fas fa-award"></i>Adjudicatarios:</h5>
                            <p class="stat" th:text="${indicadores_Ayutamiento.body.numEmpresas}"> 366 </p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h3>Ingresos</h3>
                        <div class="col-md-5">
                            <h5><i class="fas fa-coins"></i>Cuantía:</h5>
                            <p class="stat" th:text="${#numbers.formatDecimal(indicadores_Ayutamiento.body.cuantiaCanon,3,'POINT',2,'COMMA')+' €'}"></p>
                        </div>
                        <div class="col-md-3">
                            <h5><i class="fas fa-file-signature"></i>Contratos:</h5>
                            <p class="stat" th:text="${indicadores_Ayutamiento.body.contratosCanon.totalCount}"></p>
                        </div>
                        <div class="col-md-4">
                            <h5><i class="fas fa-award"></i>Adjudicatarios:</h5>
                            <p class="stat" th:text="${indicadores_Ayutamiento.body.numEmpresaCanon}"> 366 </p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="hidden">
                <div id="inputBublle" th:each="cont: ${indicadores_Ayutamiento.body.indicadorBurbuja.result}">
                    <input type="hidden" class="" th:id="${'indicadorBubbleContrato'}" th:value="${cont.idContrato}"/>
                    <input type="hidden" class="" th:id="${'indicadorBubbleEmpresa'}" th:value="${cont.empresa}"/>
                    <input type="hidden" class="" th:id="${'indicadorBubbleImporte'}" th:value="${cont.cuantia}"/>
                    <input type="hidden"  class="" th:id="${'indicadorBubbleTipo'}" th:value="${cont.tipo}"/>
                    <input type="hidden"  class="" th:id="${'indicadorBubbleprocedimiento'}" th:value="${cont.procedimiento}"/>
                    <input type="hidden"  class="" th:id="${'indicadorBubbletitle'}" th:value="${cont.title}"/>
                </div>
            </div>
            <div class="row padding-a1em">
                <div class="col-lg-5 col-md-5 col-sm-12 col-xs-12">
                    <label for="group-everything-by" >Agrupar</label>
                    <select id="group-everything-by" name="agrupar" class="form-control">
                        <option value="">Agrupar</option>
                    </select>
                </div>
                <div class="col-md-2"></div>
                <div class="col-lg-5 col-md-5 col-sm-12 col-xs-12">
                    <label for="color-everything-by" >Colorear</label>
                    <select id="color-everything-by" name="colorear" class="form-control">
                        <option value="">Colorear</option>
                    </select>
                </div>
            </div>
        <div class="bubbleDiv">
            <div class="row antebusr">
                <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                    <h5>Información del gráfico:</h5>
                    <p class="well"> * El radio de la burbuja es proporcinal a la cuantia del contrato adjudicado</p>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                    <div id="color-hints"></div>
                </div>
            </div>
                <div class="row">
                    <div class="col-sm-12">
                        <!-- d3 bubble chart-->
                        <div id="vis" class="svg-container"></div>
                    </div>
                </div>

            </div>
        </div>
        <div class="row" th:if="${indicadores_Ayutamiento.body.indicadorLicitador != null}">
            <header class="title"><h2>Indicadores por licitador</h2></header>
          <div class="col-lg-6 col-md-6 col-xs-12">
              <div id="myChart" style="height: 400px"></div>
          </div>
          <div class="col-lg-6 col-md-6 col-xs-12">
              <select id="iva" name="iva">
                  <option value="1" selected ="Selected">Sin I.V.A</option>
                  <option value="2" >Con I.V.A</option>
              </select>
              <div id="myChart2" style="height: 100%"></div>
          </div>
        </div>
            <div class="clearfix" th:if="${indicadores_Ayutamiento.body.indicadorLicitador!=null}">
                <th:block  th:each="item,iterStat: ${indicadores_Ayutamiento.body.indicadorLicitador.result}" th:if="${iterStat.index} lt 10">
                  <input type="hidden" th:id="${'entidad'+item.licitador}" th:value="${item.licitador}"/>
                    <input type="hidden" th:id="${'entidad'+item.licitador}" th:value="${item.totalsinIva !=null ? item.totalsinIva:'0'}"/>
                    <input type="hidden" th:id="${'entidad'+item.licitador}" th:value="${item.totalconIva !=null ? item.totalconIva:'0'}"/>
                    <input type="hidden" th:id="${'entidad'+item.licitador}" th:value="${item.totalicitadciones}"/>
                    <input type="hidden" th:id="${'entidad'+item.licitador}" th:value="${item.anyo}"/>
                </th:block>
            </div>
            <div class="clearfix"></div>
            <div class="col-lg-12 col-md-9 col-xs-12" th:if="${indicadores_Ayutamiento.body.indicadorLicitador!=null}">
                <header>
                    <h2>Listado de licitadores  por cuantia y Nº de licitaciones <span th:text="${indicadores_Ayutamiento.body.anyo}"></span></h2>
                </header>
        <div class="table-responsive">
                <table id="tableGanadores" class="table table-hovertable-bordered">
                    <thead>
                        <tr>
                            <th>Licidador</th>
                            <th>Total Sin I.V.A (€)</th>
                            <th>Total Con I.V.A (€)</th>
                            <th>Nº de Contratos Licitados</th>
                            <th>Nº de Contratos Ganados</th>
                        </tr>
                    </thead>
                    <tbody>
                      <tr th:each="item:${indicadores_Ayutamiento.body.indicadorLicitador.result}">
                        <td><a th:href="${'/sede/servicio/contratacion-publica/licitador/'+item.idEmpresa}" th:text="${#strings.capitalize(#strings.toLowerCase(item.licitador))}"></a></td>
                        <td th:text="${item.totalsinIva !=null ? #numbers.formatDecimal(item.totalsinIva, 0, 'POINT', 2, 'COMMA'):'0'}"/>
                        <td  th:text="${item.totalconIva !=null ? #numbers.formatDecimal(item.totalconIva,0,'POINT', 2, 'COMMA'):'0'}"/>
                        <td th:text="${#numbers.formatDecimal(item.totalicitadciones, 0, 'POINT', 2, 'COMMA')}"/>
                        <td th:text="${#numbers.formatDecimal(item.totalGanados, 0, 'POINT', 2, 'COMMA')}"/>
                      </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="row" th:if="${indicadores_Ayutamiento.body.indicadorLicitadorServicio != null}">
            <header class="title"><h2>Indicadores por licitador</h2></header>
            <div class="col-lg-6 col-md-6 col-xs-12">
                <div id="myChart" style="height: 400px"></div>
            </div>
            <div class="col-lg-6 col-md-6 col-xs-12">
                <select id="iva" name="iva">
                    <option value="1" selected ="Selected">Sin I.V.A</option>
                    <option value="2" >Con I.V.A</option>
                </select>
                <div id="myChart2" style="height: 100%"></div>
            </div>
        </div>
        <div class="clearfix" th:if="${indicadores_Ayutamiento.body.indicadorLicitadorServicio!=null}">
            <th:block  th:each="item,iterStat: ${indicadores_Ayutamiento.body.indicadorLicitadorServicio.result}" th:if="${iterStat.index} lt 10">
                <input type="hidden" th:id="${'entidad'+item.licitador}" th:value="${item.licitador}"/>
                <input type="hidden" th:id="${'entidad'+item.licitador}" th:value="${item.totalsinIva !=null ? item.totalsinIva:'0'}"/>
                <input type="hidden" th:id="${'entidad'+item.licitador}" th:value="${item.totalconIva !=null ? item.totalconIva:'0'}"/>
                <input type="hidden" th:id="${'entidad'+item.licitador}" th:value="${item.totalicitadciones}"/>
                <input type="hidden" th:id="${'entidad'+item.licitador}" th:value="${item.anyo}"/>
            </th:block>
        </div>
        <div class="clearfix"></div>
        <div class="col-lg-12 col-md-9 col-xs-12" th:if="${indicadores_Ayutamiento.body.indicadorLicitadorServicio!=null}">
            <header>
                <h2>Listado de licitadores  por cuantia y Nº de licitaciones <span th:text="${indicadores_Ayutamiento.body.anyo}"></span></h2>
            </header>
            <div class="table-responsive">
                <table id="tableGanadores" class="table table-hovertable-bordered">
                    <thead>
                        <tr>
                            <th>Licidador ganador</th>
                            <th>Total sin I.V.A (€)</th>
                            <th>Total con I.V.A (€)</th>
                            <th>Nº de contratos licitados</th>
                            <th>Nº de contratos Ganados</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="item:${indicadores_Ayutamiento.body.indicadorLicitadorServicio.result}">
                            <td><a th:href="${'/sede/servicio/contratacion-publica/licitador/'+item.idEmpresa}" th:text="${#strings.capitalize(#strings.toLowerCase(item.licitador))}"></a></td>
                            <td th:text="${item.totalsinIva !=null ? #numbers.formatDecimal(item.totalsinIva, 0, 'POINT', 2, 'COMMA'):'0'}"/>
                            <td  th:text="${item.totalconIva !=null ? #numbers.formatDecimal(item.totalconIva,0,'POINT', 2, 'COMMA'):'0'}"/>
                            <td th:text="${#numbers.formatDecimal(item.totalicitadciones, 0, 'POINT', 2, 'COMMA')}"/>
                            <td th:text="${#numbers.formatDecimal(item.totalGanados, 0, 'POINT', 2, 'COMMA')}"/>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="col-lg-12 col-md-9 col-xs-12" th:if="${indicadores_Ayutamiento.body.indicadorServicio!=null}" th:include="/servicio/contratacion-publica/indicadores-servicio"> </div>
        <div class="col-lg-12 col-md-9 col-xs-12" th:if="${indicadores_Ayutamiento.body.indicadorProcedimiento !=null}" th:include="/servicio/contratacion-publica/indicadores-procedimiento"></div>
        <div class="col-lg-12 col-md-9 col-xs-12" th:if="${indicadores_Ayutamiento.body.indicadorProcedimientoServicio !=null}" th:include="/servicio/contratacion-publica/indicadores-procedimientoSer"></div>
        <div class="col-lg-12 col-md-9 col-xs-12" th:if="${indicadores_Ayutamiento.body.indicadorAhorro !=null}" th:include="/servicio/contratacion-publica/indicadores-ahorro"></div>
        <div class="col-lg-12 col-md-9 col-xs-12" th:if="${indicadores_Ayutamiento.body.indicadorAhorroServicio !=null}" th:include="/servicio/contratacion-publica/indicadores-ahorro-servicio"></div>
        <div class="col-lg-12 col-md-9 col-xs-12" th:if="${indicadores_Ayutamiento.body.indicadorTipo !=null}" th:include="/servicio/contratacion-publica/indicadores-tipo"></div>
        <div class="col-lg-12 col-md-9 col-xs-12" th:if="${indicadores_Ayutamiento.body.indicadorTipoServicio !=null}" th:include="/servicio/contratacion-publica/indicadores-tipoSer"></div>
        <div class="clearfix"></div>

    </sede:content>
    <script src="https://www.zaragoza.es/cont/assets/less/bootstrap-slider-master/dist/bootstrap-slider.min.js"></script>
    <script src="https://www.zaragoza.es/cont/assets/lib/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/chart.js@2.7.3/dist/Chart.bundle.min.js"/>
    <script type="text/javascript" src="https://d3js.org/d3.v3.min.js"/>
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js" />
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap.min.js"/>
    <script type="text/javascript" src="https://code.highcharts.com/highcharts.js"/>
    <script type="text/javascript" src="https://code.highcharts.com/highcharts-3d.js"/>
    <script type="text/javascript" src="https://code.highcharts.com/modules/exporting.js"/>
    <script type="text/javascript" src="https://code.highcharts.com/modules/export-data.js"/>
    <script type="text/javascript" src="//www.zaragoza.es/cont/plantillas/sede/js/typeahead.bundle.js"/>
    <script type="text/javascript">
    /*<![CDATA[*/

        $(document).ready(function() {
         $('#tableTipo').DataTable({
            "language": {
                "decimal": ",",
                "thousands": ".",
                "lengthMenu": "Ver _MENU_ registros por pagina",
                "zeroRecords": "No hay registros",
                "info": "Viendo  _PAGE_ de _PAGES_",
                "infoEmpty": "No registros Disponibles",
                "infoFiltered": "(filtered from _MAX_ total records)",
                "searchMenu":"Buscar",
                "loadingRecords": "Cargando...",
                "processing":     "Procesando...",
                "search":         "Buscar:",
                "paginate": {
                  "first":      "Primera",
                  "last":       "Ultima",
                  "next":       "Siguiente",
                  "previous":   "Anterior"
                  },
            },
            "aaSorting": [[ 3, "desc"],[ 1, "asc"],[ 0, "desc"]],
           "columnDefs": [
              {
                "targets": [1,2],
                "render": function (data) {
                  return data;
                }
               }
             ],
         });
         $('#tableServicios').DataTable({
            "language": {
                "decimal": ",",
                "thousands": ".",
                "lengthMenu": "Ver _MENU_ registros por pagina",
                "zeroRecords": "No hay registros",
                "info": "Viendo  _PAGE_ de _PAGES_",
                "infoEmpty": "No registros Disponibles",
                "infoFiltered": "(filtered from _MAX_ total records)",
                "searchMenu":"Buscar",
                "loadingRecords": "Cargando...",
                "processing":     "Procesando...",
                "search":         "Buscar:",
                "paginate": {
                  "first":      "Primera",
                  "last":       "Ultima",
                  "next":       "Siguiente",
                  "previous":   "Anterior"
                  },
            },
            "aaSorting": [[ 3, "desc"],[ 1, "asc"],[ 0, "desc"]],
           "columnDefs": [
              {
                "targets": [1,2],
                "render": function (data) {
                  return data;
                }
               }
             ],
         });
        $('#tableIndicadoreProcedimiento').DataTable({
        "language": {
            "decimal": ",",
            "thousands": ".",
            "lengthMenu": "Ver _MENU_ registros por pagina",
            "zeroRecords": "No hay registros",
            "info": "Viendo  _PAGE_ de _PAGES_",
            "infoEmpty": "No registros Disponibles",
            "infoFiltered": "(filtered from _MAX_ total records)",
            "searchMenu":"Buscar",
            "loadingRecords": "Cargando...",
            "processing":     "Procesando...",
            "search":         "Buscar:",
            "paginate": {
              "first":      "Primera",
              "last":       "Ultima",
              "next":       "Siguiente",
              "previous":   "Anterior"
              },
        },
        "aaSorting": [[ 3, "desc"],[ 1, "asc"],[ 0, "desc"]],
        "columnDefs": [
              {
                "targets": [1,2],
                "render": function (data) {
                  return data;
                }
               }
             ],
        });
    });
          $('#tableGanadores').DataTable({
        "language": {
                "decimal": ",",
                "thousands": ".",
                "lengthMenu": "Ver _MENU_ registros por pagina",
                "zeroRecords": "No hay registros",
                "info": "Viendo  _PAGE_ de _PAGES_",
                "infoEmpty": "No registros Disponibles",
                "infoFiltered": "(filtered from _MAX_ total records)",
                "searchMenu":"Buscar",
                "loadingRecords": "Cargando...",
                "processing":     "Procesando...",
                "search":         "Buscar:",
                "paginate": {
                  "first":      "Primera",
                  "last":       "Ultima",
                  "next":       "Siguiente",
                  "previous":   "Anterior"
                  },
            }, 
            "aaSorting": [[ 3, "desc"],[ 1, "asc"],[ 0, "desc"]],
            "columnDefs": [
              {
                "targets": [1,2],
                "render": function (data) {
                  return data;
                }
               }
             ],
            });
         //Buscador Servicio
        var servicioDataset = new Bloodhound({
            datumTokenizer: function(countries) {
                return Bloodhound.tokenizers.whitespace(result.value);
            },
            queryTokenizer: Bloodhound.tokenizers.whitespace,
            remote: {
                url: '/sede/servicio/contratacion-publica/servicio-gestor/?rows=10&q=title==%QUERY*&fl=id,title',

                filter: function(response) {
                    //console.log(response);
                    return response.result;
                },
                wildcard: '%QUERY',
            }
        });
          $("select#entity").change(function () {
            if ($('#entity').val() == 1) {
                $('#servicioDiv').toggle();
                $('#servicio').removeAttr('disabled');
            } else {
                $('#servicio').attr('disabled','disabled');
                if($('#servicioDiv').css('display')=='block')$('#servicioDiv').toggle();
            }
        });
        $('#servicio').typeahead(null, {
            name: 'servicios',
            displayKey: function(results) {
                return results.title;
            },
            source: servicioDataset
        });
        $('#servicio').bind('typeahead:select', function(ev, suggestion) {
           // console.log('Selection: ' + JSON.stringify(suggestion));
            var item = suggestion;
            $('#servicioGestor').val(item.id);
            table.draw();
        });
         $('#tableAhorro').DataTable({
            "language": {
                "decimal": ",",
                "thousands": ".",
                "lengthMenu": "Ver _MENU_ registros por pagina",
                "zeroRecords": "No hay registros",
                "info": "Viendo  _PAGE_ de _PAGES_",
                "infoEmpty": "No registros Disponibles",
                "infoFiltered": "(filtered from _MAX_ total records)",
                "searchMenu":"Buscar",
                "loadingRecords": "Cargando...",
                "processing":     "Procesando...",
                "search":         "Buscar:",
                "paginate": {
                  "first":      "Primera",
                  "last":       "Ultima",
                  "next":       "Siguiente",
                  "previous":   "Anterior"
                  },
            },
            "aaSorting": [[ 3, "desc"],[ 1, "asc"],[ 0, "desc"]],
           "columnDefs": [
              {
                "targets": [1,2],
                "render": function (data) {
                  return data;
                }
               }
             ],
         });

      /*]]>*/
    </script>
    <script type="text/javascript">
        /*<![CDATA[*/
         window.onload = function ()
        {
          licitadores=Array();
          totalLicitaciones=Array();
          totalLicitacionesConIva=Array();
          totalLicitacionesSinIva=Array();
          anyo="";
          var etiquetas=$('#tamano').val();
          var dato2=$("input[id^='entidad']");
          if(dato2.length>0){
          //console.log(dato2);
          Highcharts.setOptions({
            lang: {
                decimalPoint: ',',
                thousandsSeparator: '.'
            },
          });
          for(var i=0;i < dato2.length;i=i+5){
            if(dato2[i] !=undefined){
             licitadores.push({"name":$(dato2[i]).val(),"y":parseInt($(dato2[i+3]).val())});
            }
          }
          ColorBackGround=Array();
          ColorBorder=Array();
          for(var i=0;i<dato2.length;i++){
            ColorBackGround.push(random_rgba(1))
            ColorBorder.push(random_rgba(0));
          }
          suma=0;
          for(var i=0;i < dato2.length;i=i+5){
            if(dato2[i+1] !=undefined){
              suma+=parseInt($(dato2[i]).attr('data'));
              totalLicitacionesSinIva.push({"name":$(dato2[i]).val(),"y":parseFloat($(dato2[i+1]).val())});
              anyo='Año '+$(dato2[i+4]).val();
            }
          }
          for(var i=0;i < dato2.length;i=i+5){
          //console.log($(dato2[i+2]).val());
            if($(dato2[i+2]).val() !=''){
              suma+=parseInt($(dato2[i]).attr('data'));
              totalLicitacionesConIva.push({"name":$(dato2[i]).val(),"y":parseFloat($(dato2[i+2]).val())});
            }
          }
         // console.log(totalLicitacionesSinIva);
          //console.log(totalLicitacionesConIva);
          var chart2= Highcharts.chart('myChart', {
            chart: {
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false,
            type: 'pie'
          },
            tooltip: {
            pointFormat: '{series.name}: <b>{point.y}</b>'
          },
          plotOptions: {
             pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                  enabled: true,
                  format: '<b>{point.name}</b>: {point.y}',
                  style: {
                     color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                      }
                  }
              }
          },
          title: {
              text: 'Total de licitaciones por licitador'
          },
          subtitle: {
              text: anyo,
          },
          series: [{
            name:"Total Licitaciones",
            colorByPoint: true,
            data: licitadores
          }],
          credits: {
             //quitando los creditos
              enabled: false
              },
          exporting: {
             //deshabilitando el boton de print
               enabled: true
              },
          legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'middle',
            borderWidth: 0
          },
        });

        var chart = Highcharts.chart('myChart2', {
           chart: {
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false,
            type: 'pie'
          },
            tooltip: {
            pointFormat: '{series.name}: <b>{point.y}</b>'
          },
          plotOptions: {
             pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                  enabled: true,
                  format: '<b>{point.name}</b>: {point.y:.2f}',
                  style: {
                     color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                      }
                  }
              }
          },
          title: {
              text: 'Total €  por licitador sin I.V.A.'
          },
          subtitle: {
              text: anyo
          },
          series: [{
            name:"Total € Licitado Sin Iva",
            colorByPoint: true,
            data: totalLicitacionesSinIva
          }],
          credits: {
             //quitando los creditos
              enabled: false
              },
          exporting: {
             //deshabilitando el boton de print
               enabled: true
              },
          legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'middle',
            borderWidth: 0
          },
        });

        $('#iva').change(function(e){
          var sinIva=Array();
          var conIva=Array();
          if($(this).val()==="1"){
            chart.series[0].setData(totalLicitacionesSinIva);
            chart.setTitle({text: "Total €  por licitador Sin I.V.A"});
          }else if($(this).val()==="2"){
            chart.series[0].setData(totalLicitacionesConIva);
            chart.setTitle({text: "Total €  por licitador Con I.V.A"});
          }
        });
        }
          licitadores2=Array();
          totalLicitaciones2=Array();
          totalConIva2=Array();
          totalSinIva2=Array();
          var etiquetas=$('#tamano').val();
          var dato=$("input[id^='IndicadorServicio']");
          if(dato.length>0){
          //console.log(dato);
        Highcharts.setOptions({
            lang: {
                decimalPoint: ',',
                thousandsSeparator: '.'
            },});
          for(var i=0;i < dato.length;i=i+5){
          if(dato[i] !=undefined){
           licitadores2.push({"name":$(dato[i]).val(),"y":parseInt($(dato[i+3]).val())});
          }
        }
        for(var i=0;i < dato.length;i=i+5){
          if(dato[i] !=undefined){
           totalConIva2.push({"name":$(dato[i]).val(),"y":parseInt($(dato[i+2]).val())});
          }
        }
        for(var i=0;i < dato.length;i=i+5){
          if(dato[i] !=undefined){
           totalSinIva2.push({"name":$(dato[i]).val(),"y":parseInt($(dato[i+1]).val())});
           anyo2='Año '+$(dato[i+4]).val();
          }
        }
        ColorBackGround=Array();
        ColorBorder=Array();
        for(var i=0;i<dato.length;i++){
          ColorBackGround.push(random_rgba(1))
          ColorBorder.push(random_rgba(0));
        }
        //console.log(licitadores2);
         //console.log(totalConIva2);
          //console.log(totalSinIva2);
        suma=0;
        var chart3 = Highcharts.chart('container2', {
          chart: {
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false,
            type: 'pie'
          },
            tooltip: {
            pointFormat: '{series.name}: <b>{point.y}</b>'
          },
          plotOptions: {
             pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                  enabled: true,
                  format: '<b>{point.name}</b>: {point.y:.2f}',
                  style: {
                     color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                      }
                  }
              }
          },
          title: {
              text: 'Total por Servicio Gestor'
          },
          subtitle: {
              text: anyo
          },
          series: [{
            name:"Total por Servicio Gestor",
            colorByPoint: true,
            data: licitadores2
          }],
          credits: {
             //quitando los creditos
              enabled: false
              },
          exporting: {
             //deshabilitando el boton de print
               enabled: false
              },
          legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'middle',
            borderWidth: 0
          },
        });

        var chart4 = Highcharts.chart('container',
        {
            chart: {
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false,
            type: 'pie'
            },
            tooltip: {
            pointFormat: '{series.name}: <b>{point.y}</b>'
             },
            plotOptions: {
             pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                  enabled: true,
                  format: '<b>{point.name}</b>: {point.y:.2f}',
                  style: {
                     color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                      }
                  }
              }
            },
            title: {
                text: 'Total €  por Servicio Gestor sin I.V.A.'
            },
            subtitle: {
                text: anyo
            },
            series: [{
              name:"Total € por Servicio Gestor Sin Iva",
              colorByPoint: true,
              data: totalSinIva2
            }],
            credits: {
               //quitando los creditos
                enabled: false
                },
            exporting: {
               //deshabilitando el boton de print
                 enabled: true
                },
            legend: {
              layout: 'vertical',
              align: 'right',
              verticalAlign: 'middle',
              borderWidth: 0
            },
        });
}
    $('#iva').change(function(e){
        //console.log($(this).val());
        if($(this).val()==1){
            chart3.series[0].setData(totalSinIva2);
            chart3.setTitle({text: "Total € por Servicio Gestor Sin I.V.A"});
        }else{
            chart3.series[0].setData(totalConIva2);
            chart3.setTitle({text: "Total €  por Servicio Gestor Con I.V.A"});
        }
    });

    licitadores3=Array();
    totalLicitaciones3=Array();
    totalConIva3=Array();
    totalSinIva3=Array();
    var etiquetas=$('#tamano').val();
    var dato=$("input[id^='indicadoresProcedimiento']");
    if(dato.length>0){
    //console.log(dato);

    Highcharts.setOptions({
        lang: {
            decimalPoint: ',',
            thousandsSeparator: '.'
        },});
      for(var i=0;i < dato.length;i=i+6){
      if(dato[i] !=undefined){
       licitadores3.push({"name":$(dato[i]).val(),"y":parseInt($(dato[i+3]).val())});
      }
    }
    for(var i=0;i < dato.length;i=i+6){
      if(dato[i] !=undefined){
       totalConIva3.push({"name":$(dato[i]).val(),"y":parseInt($(dato[i+2]).val())});
      }
    }
    for(var i=0;i < dato.length;i=i+6){
      if(dato[i] !=undefined){
       totalSinIva3.push({"name":$(dato[i]).val(),"y":parseInt($(dato[i+1]).val())});
       anyo4='Año '+$(dato[i+4]).val();
      }
    }
    ColorBackGround=Array();
    ColorBorder=Array();
    for(var i=0;i<dato.length;i++){
      ColorBackGround.push(random_rgba(1))
      ColorBorder.push(random_rgba(0));
    }

    if(licitadores3.length>1){
    var chart5 = Highcharts.chart('container4', {
       chart: {
        plotBackgroundColor: null,
        plotBorderWidth: null,
        plotShadow: false,
        type: 'pie'
      },
        tooltip: {
        pointFormat: '{series.name}: <b>{point.y}</b>'
      },
      plotOptions: {
         pie: {
            allowPointSelect: true,
            cursor: 'pointer',
            dataLabels: {
              enabled: true,
              format: '<b>{point.name}</b>: {point.y:.2f}',
              style: {
                 color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                  }
              }
          }
      },
      title: {
          text: 'Total por Procedimiento'
      },
      subtitle: {
          text: anyo
      },
      series: [{
        name:"Total por Procedimiento",
        colorByPoint: true,
        data: licitadores3
      }],
      credits: {
         //quitando los creditos
          enabled: false
          },
      exporting: {
         //deshabilitando el boton de print
           enabled: true
          },
      legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'middle',
        borderWidth: 0
      },
    });
    var chart6 = Highcharts.chart('container3', {
       chart: {
        plotBackgroundColor: null,
        plotBorderWidth: null,
        plotShadow: false,
        type: 'pie'
      },
        tooltip: {
        pointFormat: '{series.name}: <b>{point.y}</b>'
      },
      plotOptions: {
         pie: {
            allowPointSelect: true,
            cursor: 'pointer',
            dataLabels: {
              enabled: true,
              format: '<b>{point.name}</b>: {point.y:.2f}',
              style: {
                 color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                  }
              }
          }
      },
      title: {
          text: 'Total €  por Procedimiento sin I.V.A.'
      },
      subtitle: {
          text: anyo4
      },
      series: [{
        name:"Total € por Procedimiento Sin Iva",
        colorByPoint: true,
        data: totalSinIva3
      }],
      credits: {
         //quitando los creditos
          enabled: false
          },
      exporting: {
         //deshabilitando el boton de print
           enabled: true
          },
      legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'middle',
        borderWidth: 0
      },
    });
    }
    }
    licitadores4=Array();
    totalLicitaciones4=Array();
    totalConIva4=Array();
    totalSinIva4=Array();
    var etiquetas=$('#tamano').val();
    var dato=$("input[id^='IndicadorProcedimientoServicio']");
    if(dato.length>0){
    //console.log(dato);
    Highcharts.setOptions({
        lang: {
            decimalPoint: ',',
            thousandsSeparator: '.'
        },
    });
      for(var i=0;i < dato.length;i=i+5){
      if(dato[i] !=undefined){
       licitadores4.push({"name":$(dato[i]).val(),"y":parseInt($(dato[i+3]).val())});
      }
    }
    for(var i=0;i < dato.length;i=i+5){
      if(dato[i] !=undefined){
       totalConIva4.push({"name":$(dato[i]).val(),"y":parseInt($(dato[i+2]).val())});
      }
    }
    for(var i=0;i < dato.length;i=i+5){
     //console.log("---------------------"+dato[i]);
      if(dato[i] !=undefined){
       totalSinIva4.push({"name":$(dato[i]).val(),"y":parseInt($(dato[i+1]).val())});
       anyo5='Año '+$(dato[i+4]).val();
      }
    }


    ColorBackGround=Array();
    ColorBorder=Array();
    for(var i=0;i<dato.length;i++){
      ColorBackGround.push(random_rgba(1))
      ColorBorder.push(random_rgba(0));
    }
    if(licitadores4.length>1){
    var chart7 = Highcharts.chart('container7', {
          chart: {
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false,
            type: 'pie'
          },
            tooltip: {
            pointFormat: '{series.name}: <b>{point.y}</b>'
          },
          plotOptions: {
             pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                  enabled: true,
                  format: '<b>{point.name}</b>: {point.y:.2f}',
                  style: {
                     color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                      }
                  }
              }
          },
          title: {
              text: 'Total por Servicio Gestor'
          },
          subtitle: {
              text: anyo5
          },
          series: [{
            name:"Total por Servicio Gestor",
            colorByPoint: true,
            data: licitadores4
          }],
          credits: {
             //quitando los creditos
              enabled: false
              },
          exporting: {
             //deshabilitando el boton de print
               enabled: true
              },
          legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'middle',
            borderWidth: 0
          },
        });

 var chart6 = Highcharts.chart('container5', {
       chart: {
        plotBackgroundColor: null,
        plotBorderWidth: null,
        plotShadow: false,
        type: 'pie'
      },
        tooltip: {
        pointFormat: '{series.name}: <b>{point.y}</b>'
      },
      plotOptions: {
         pie: {
            allowPointSelect: true,
            cursor: 'pointer',
            dataLabels: {
              enabled: true,
              format: '<b>{point.name}</b>: {point.y:.2f}',
              style: {
                 color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                  }
              }
          }
      },
      title: {
          text: 'Total €  por Procedimiento sin I.V.A.'
      },
      subtitle: {
          text: anyo5
      },
      series: [{
        name:"Total € por Procedimiento Sin Iva",
        colorByPoint: true,
        data: totalSinIva4
      }],
      credits: {
         //quitando los creditos
          enabled: false
          },
      exporting: {
         //deshabilitando el boton de print
           enabled: true
          },
      legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'middle',
        borderWidth: 0
      },
    });
    }
}
     $('#ivaProcedimiento').change(function(e){
       //       console.log(totalSinIva4);
              if($(this).val()==1){
                chart6.series[0].setData(totalSinIva4);
                chart6.setTitle({text: "Total € por Procedimiento Sin I.V.A"});
              }else{
                chart6.series[0].setData(totalConIva4);
                chart6.setTitle({text: "Total €  por Procedimiento Con I.V.A"});
              }
          });
    ahorro=Array();
    importeContrato=Array();
    importeOferta=Array();
    var etiquetas=$('#tamano').val();
    var dato=$("input[id^='IndicadorAhorro']");
    if(dato.length>0){
    //console.log(dato);
    Highcharts.setOptions({
        lang: {
            decimalPoint: ',',
            thousandsSeparator: '.'
        },
    });
      for(var i=0;i < dato.length;i=i+5){
      if(dato[i] !=undefined){
       ahorro.push({"name":$(dato[i]).val(),"y":parseFloat($(dato[i+1]).val())});
      }
    }
    for(var i=0;i < dato.length;i=i+5){
      if(dato[i] !=undefined){
       importeContrato.push({"name":$(dato[i]).val(),"y":parseFloat($(dato[i+2]).val())});
      }
    }
    for(var i=0;i < dato.length;i=i+5){
     //console.log("---------------------"+dato[i]);
      if(dato[i] !=undefined){
       importeOferta.push({"name":$(dato[i]).val(),"y":parseFloat($(dato[i+3]).val())});
       anyoAhorro='Año '+$(dato[i+4]).val();
      }
    }


    ColorBackGround=Array();
    ColorBorder=Array();
    for(var i=0;i<dato.length;i++){
      ColorBackGround.push(random_rgba(1))
      ColorBorder.push(random_rgba(0));
    }
    var chart7 = Highcharts.chart('container8', {
          chart: {
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false,
            type: 'bar'
          },
            tooltip: {
            pointFormat: '{series.name}: <b>{point.y}</b>'
          },
          plotOptions: {
             pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                  enabled: true,
                  format: '<b>{point.name}</b>: {point.y:.2f}',
                  style: {
                     color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                      }
                  }
              }
          },
          title: {
              text: '10 máximo % del Ahorro por contrato'
          },
          subtitle: {
              text: anyoAhorro
          },
          series: [{
            name:" % del Ahorro por contrato",
            colorByPoint: true,
            data: ahorro
          }],
          credits: {
             //quitando los creditos
              enabled: false
              },
          exporting: {
             //deshabilitando el boton de print
               enabled: true
              },
          legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'middle',
            borderWidth: 0
          },
        });

 var chart6 = Highcharts.chart('container9', {
       chart: {
        plotBackgroundColor: null,
        plotBorderWidth: null,
        plotShadow: false,
        type: 'pie'
      },
        tooltip: {
        pointFormat: '{series.name}: <b>{point.y}</b>'
      },
      plotOptions: {
         pie: {
            allowPointSelect: true,
            cursor: 'pointer',
            dataLabels: {
              enabled: true,
              format: '<b>{point.name}</b>: {point.y:.2f}',
              style: {
                 color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                  }
              }
          }
      },
      title: {
          text: 'Total €  por Contrato Sin I.V.A.'
      },
      subtitle: {
          text: anyoAhorro
      },
      series: [{
        name:"Total € por Contrato Sin I.V.A",
        colorByPoint: true,
        data: importeContrato
      }],
      credits: {
         //quitando los creditos
          enabled: false
          },
      exporting: {
         //deshabilitando el boton de print
           enabled: true
          },
      legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'middle',
        borderWidth: 0
      },
    });
}
     $('#ivaAhorro').change(function(e){
            //  console.log(totalSinIva4);
              if($(this).val()==1){
                chart6.series[0].setData(importeContrato);
                chart6.setTitle({text: "Total € por Contrato Sin I.V.A"});
              }else{
                chart6.series[0].setData(importeOferta);
                chart6.setTitle({text: "Total €  por Oferta Sin I.V.A"});
              }
          });
    tipo=Array();
    importeContrato=Array();
    importeOferta=Array();
    var etiquetas=$('#tamano').text();
    var dato=$("input[id^='IndicadorTipo']");
    if(dato.length>0){
    //console.log(dato);
    Highcharts.setOptions({
        lang: {
            decimalPoint: ',',
            thousandsSeparator: '.'
        },
    });
      for(var i=0;i < dato.length;i=i+6){
      if(dato[i] !=undefined){
       tipo.push({"name":$(dato[i]).val(),"y":parseFloat($(dato[i+3]).val())});
      }
    }
    for(var i=0;i < dato.length;i=i+6){
      if(dato[i] !=undefined){
       importeContrato.push({"name":$(dato[i]).val(),"y":parseFloat($(dato[i+2]).val())});
      }
    }
    for(var i=0;i < dato.length;i=i+6){
     //console.log("---------------------"+dato[i]);
      if(dato[i] !=undefined){
       importeOferta.push({"name":$(dato[i]).val(),"y":parseFloat($(dato[i+1]).val())});
       anyoAhorro='Año '+$(dato[i+4]).val();
      }
    }


    ColorBackGround=Array();
    ColorBorder=Array();
    for(var i=0;i<dato.length;i++){
      ColorBackGround.push(random_rgba(1))
      ColorBorder.push(random_rgba(0));
    }
    if(tipo.length>1){
    var chart10 = Highcharts.chart('container10', {
          chart: {
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false,
            type: 'pie'
          },
            tooltip: {
            pointFormat: '{series.name}: <b>{point.y}</b>'
          },
          plotOptions: {
             pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                  enabled: true,
                  format: '<b>{point.name}</b>: {point.y:.2f}',
                  style: {
                     color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                      }
                  }
              }
          },
          title: {
              text: 'Nº Contratos por Tipo de contrato'
          },
          subtitle: {
              text: anyoAhorro
          },
          series: [{
            name:" Nº Contratos por Tipo de contrato",
            colorByPoint: true,
            data: tipo
          }],
          credits: {
             //quitando los creditos
              enabled: false
              },
          exporting: {
             //deshabilitando el boton de print
               enabled: true
              },
          legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'middle',
            borderWidth: 0
          },
        });

 var chart11 = Highcharts.chart('container11', {
       chart: {
        plotBackgroundColor: null,
        plotBorderWidth: null,
        plotShadow: false,
        type: 'pie'
      },
        tooltip: {
        pointFormat: '{series.name}: <b>{point.y}</b>'
      },
      plotOptions: {
         pie: {
            allowPointSelect: true,
            cursor: 'pointer',
            dataLabels: {
              enabled: true,
              format: '<b>{point.name}</b>: {point.y:.2f}',
              style: {
                 color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                  }
              }
          }
      },
      title: {
          text: 'Total €  por Tipo Contrato Sin I.V.A.'
      },
      subtitle: {
          text: anyoAhorro
      },
      series: [{
        name:"Total € por Tipo Contrato Sin I.V.A",
        colorByPoint: true,
        data: importeOferta
      }],
      credits: {
         //quitando los creditos
          enabled: false
          },
      exporting: {
         //deshabilitando el boton de print
           enabled: true
          },
      legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'middle',
        borderWidth: 0
      },
    });
    }
}
     $('#ivaTipo').change(function(e){
             //console.log(chart11.series[0]);
              if($(this).val()==1){
               chart11.series[0].setData();
                chart11.series[0].setData(importeOferta);
                chart11.setTitle({text: "Total € por Tipo Contrato Sin I.V.A"});
              }else{
                chart11.series[0].setData();
                chart11.series[0].setData(importeContrato);
                chart11.setTitle({text: "Total €  por Tipo Contrato Con I.V.A"});
              }
          });
  }


    function random_rgba(i) {
          var o = Math.round, r = Math.random, s = 255;
          if(i==1){
            return 'rgba(' + o(r()*s) + ',' + o(r()*s) + ',' + o(r()*s) + ',' + r().toFixed(1) + ')';
          }else{
            return 'rgba(' + o(r()*s) + ',' + o(r()*s) + ',' + o(r()*s) + ',0.2)';
          }
    }
    valueInicial=$('#anyoSlider').val();
    var d = new Date();
    actual= d.getFullYear();
        var slider = new Slider("#anyo", {
    ticks: [actual-4,actual-3,actual-2,actual-1,actual],
    ticks_labels: [actual-4,actual-3,actual-2,actual-1,actual],
    ticks_snap_bounds: 20,
    value:valueInicial
});

    /*]]>*/
    </script>
    <script type="text/javascript" src="//www.zaragoza.es/cont/plantillas/sede/js/bubble.js"/>
  </body>
</html>