<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xmlns:sede="http://www.zaragoza.es" xmlns:th="http://www.thymeleaf.org">

    <head>
        <meta charset="utf-8" />
        <sede:meta title="Contratación Pública" keywords="sede,web,perfil,contratos,ayuntamiento,zaragoza,contratación" />
        <style type="text/css">
            body {
            padding-top: 57px;
            }
            .card{
            border-radius:2opx;
            }
            ul#menu {
            border-bottom: 2px solid #E81B16;
            border: 1px solid #CCC;
            font-weight: bold;
            margin-bottom: 1em;
            border-radius: 0 0 .5em .5em;
            }
            ul#menu .elemento {
            display: block;
            padding: 10px 15px;
            margin: 0;
            font-size: 1em;
            font-weight: bold;
            line-height: 1.42857143;
            }
            .panel-default>.panel-heading {
            font-weight: bold;
            color: #FFF;
            background: #D01715;
            }

            .panel-heading a:after {
            color: #FFF;
            }

            .panel {
            border-color: #0e3944;
            }

            hr {
            border-color: #0e3944;
            }

            .color-1 {
            color: #05760B;
            }
            .color-2 {
            color: #006BA8;
            }
            .color-3 {
            color: #FF9900;
            }
            .label.label-info {
            font-size: 0.9em;
            }
            .card-description {
            border-left: 3px solid #D01715;
            }
            /* Timeline */
            .timeline,
            .timeline-horizontal {
            list-style: none;
            padding: 20px;
            position: relative;
            }
            .timeline:before {
            top: 40px;
            bottom: 0;
            position: absolute;
            content: " ";
            width: 3px;
            background-color: #eeeeee;
            left: 50%;
            margin-left: -1.5px;
            }
            .timeline .timeline-item {
            margin-bottom: 20px;
            position: relative;
            }
            .timeline .timeline-item:before,
            .timeline .timeline-item:after {
            content: "";
            display: table;
            }
            .timeline .timeline-item:after {
            clear: both;
            }
            .timeline .timeline-item .timeline-badge {
            color: #fff;
            width: 54px;
            height: 54px;
            line-height: 52px;
            font-size: 22px;
            text-align: center;
            position: absolute;
            top: 18px;
            left: 50%;
            margin-left: -25px;
            background-color: #7c7c7c;
            border: 3px solid #ffffff;
            z-index: 100;
            border-top-right-radius: 50%;
            border-top-left-radius: 50%;
            border-bottom-right-radius: 50%;
            border-bottom-left-radius: 50%;
            }
            .timeline .timeline-item .timeline-badge i,
            .timeline .timeline-item .timeline-badge .fa,
            .timeline .timeline-item .timeline-badge .glyphicon {
            top: 2px;
            left: 0px;
            }
            .timeline .timeline-item .timeline-badge.primary {
            background-color: #1f9eba;
            }
            .timeline .timeline-item .timeline-badge.info {
            background-color: #5bc0de;
            }
            .timeline .timeline-item .timeline-badge.success {
            background-color: #59ba1f;
            }
            .timeline .timeline-item .timeline-badge.warning {
            background-color: #d1bd10;
            }
            .timeline .timeline-item .timeline-badge.danger {
            background-color: #ba1f1f;
            }
            .timeline .timeline-item .timeline-panel {
            position: relative;
            width: 46%;
            float: left;
            right: 16px;
            border: 1px solid #c0c0c0;
            background: #ffffff;
            border-radius: 15px;
            padding: 20px;
            -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
            box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
            }
            .timeline .timeline-item .timeline-panel:before {
            position: absolute;
            top: 26px;
            right: -16px;
            display: inline-block;
            border-top: 16px solid transparent;
            border-left: 16px solid #c0c0c0;
            border-right: 0 solid #c0c0c0;
            border-bottom: 16px solid transparent;
            content: " ";
            }
            .timeline .timeline-item .timeline-panel .timeline-title {
            margin-top: 0;
            color: inherit;
            border-bottom:  1px solid #0e3944;
            }
            .timeline .timeline-item .timeline-panel .timeline-body > p,
            .timeline .timeline-item .timeline-panel .timeline-body > ul {
            margin-bottom: 0;
            }
            .timeline .timeline-item .timeline-panel .timeline-body > p + p {
            margin-top: 5px;
            }
            .timeline .timeline-item:last-child:nth-child(even) {
            #  float: right;
            }
            .timeline .timeline-item:nth-child(even) .timeline-panel {
            float: right;
            left: 16px;
            }
            .timeline .timeline-item:nth-child(even) .timeline-panel:before {
            border-left-width: 0;
            border-right-width: 14px;
            left: -14px;
            right: auto;
            }
            .timeline-horizontal {
            list-style: none;
            position: relative;
            padding: 20px 0px 20px 0px;
            display: inline-block;
            }
            .timeline-horizontal:before {
            height: 3px;
            top: auto;
            bottom: 26px;
            left: 56px;
            right: 0;
            width: 100%;
            margin-bottom: 20px;
            }
            .timeline-horizontal .timeline-item {
            display: table-cell;
            height: 280px;
            width: 20%;
            min-width: 320px;
            float: none !important;
            padding-left: 0px;
            padding-right: 20px;
            margin: 0 auto;
            vertical-align: bottom;
            }
            .timeline-horizontal .timeline-item .timeline-panel {
            top: auto;
            bottom: 64px;
            display: inline-block;
            float: none !important;
            left: 0 !important;
            right: 0 !important;
            width: 100%;
            margin-bottom: 20px;
            }
            .timeline-horizontal .timeline-item .timeline-panel:before {
            top: auto;
            bottom: -16px;
            left: 28px !important;
            right: auto;
            border-right: 16px solid transparent !important;
            border-top: 16px solid #c0c0c0 !important;
            border-bottom: 0 solid #c0c0c0 !important;
            border-left: 16px solid transparent !important;
            }
            .timeline-horizontal .timeline-item:before,
            .timeline-horizontal .timeline-item:after {
            display: none;
            }
            .timeline-horizontal .timeline-item .timeline-badge {
            top: auto;
            bottom: 0px;
            left: 43px;
            }
            .right-ribbon {
            position: relative;
            background: #EEE;
            border: 1px solid #CCC;
            box-shadow: 0px 1px 3px rgba(0,0,0,.2);
            padding: 10px 15px;
            clear: both;
            margin-right: -25px;
            float: right;
            }
            .right-ribbon::before{
            display: block;
            width: 10px;
            height: 0px;
            position: absolute;
            bottom: -10px;
            right: -1px;
            content: "";
            border-bottom: 10px solid transparent;
            border-left: 10px solid #757575;
            }
        </style>
    </head>
    <body>
        <sede:content>
            <th:block th:include="fragmentos/error" />
            <div th:if="${resultado.statusCode.value()} == 200" th:object="${resultado.body}" vocab="http://schema.org/">
                <h2 th:if="*{visible=='S'}" th:text="*{expediente} + ' - ' + *{#strings.capitalize(title)}" property="name"></h2>
                <hr/>
                <div th:if="*{visible=='N'}" class="alert alert-info" >Contrato No existente
                </div>
                <div  th:info="*{visible=='S'}" class="row">
                    <div class="col-md-12">
                        <p th:if="*{contratoMenor == 'S'}"><span class="label label-info">Contrato Menor</span></p>
                        <div class="card card-description">
                            <th:block th:if="*{contratoMenor == 'S' and (status.id==3 or status.id==5)}">
                                <div class="right-ribbon margin-b05em">
                                    <h3 class="nomargin text-info">
                                        <span  class="fa fa-trophy " title="Apoyos Recibidos" aria-hidden="true">
                                            <span th:text="*{status.title}">Adjudicación definitiva</span>
                                            <span th:text="*{status.title}" class="sr-only">Adjudicación definitiva</span>
                                        </span>
                                    </h3>
                                </div>
                            </th:block>
                            <th:block th:if="*{contratoMenor == false}">
                                <div th:if="*{status.id == 3 OR status.id == 6 }" class="right-ribbon margin-b05em">
                                    <h3 class="nomargin text-info">
                                        <span  class="fa fa-trophy " title="Apoyos Recibidos" aria-hidden="true">
                                            <span th:text="*{status.title}"></span>
                                            <span th:text="*{status.title}" class="sr-only"></span>
                                        </span>
                                    </h3>
                                </div>
                            </th:block>
                            <ul class="list-unstyled">
                                <li th:if="*{type}">
                                    <strong>Tipo de contrato: </strong><span th:text="*{type.title}"/>
                                </li>
                                <li th:if="*{entity !=null}">
                                    <strong>Entidad Contratante: </strong>
                                    <span th:each="c:*{entity}">
                                        <a th:href="'/sede/servicio/contratacion-publica/entidad/'+${c.id}" th:text="${c.title}  "></a>
                                    </span>
                                </li>
                                <li th:if="*{organoContratante !=null}">
                                    <strong>Organismo Contratante:</strong>
                                    <span  th:each="c:*{organoContratante}" >
                                        <a th:href="'/sede/servicio/contratacion-publica/organismo-contratante/'+${c.id}" th:text="${c.title}  "></a>
                                    </span>
                                </li>
                                <li th:unless="*{servicio!=null}"><strong>Servicio Gestor: </strong><!--<a th:if="*{servicioGestor != null}" th:href="'/sede/servicio/contratacion-publica/servicio-gestor/'+*{servicioGestor}" th:text="${servicioGestor.title}"></a>-->
                                    <a  th:href="'/sede/servicio/contratacion-publica/entidad/'+*{entity.id}" th:text="*{entity.title}"></a>
                                </li>
                                <li th:if="*{creationDate}"><strong>Año: </strong><span th:text="*{#dates.format(creationDate,'yyyy')}"/></li>
                                <li th:if="*{valorEstimado}"><strong>Valor estimado: </strong><span th:text="*{#numbers.formatDecimal(valorEstimado, 0, 'POINT', 2, 'COMMA')} + '€'"/></li>
                                <li th:if="*{importeSinIVA}"><strong>Importe: </strong><span th:text="*{#numbers.formatDecimal(importeSinIVA, 0, 'POINT', 2, 'COMMA')} + '€'"/>
                                    <span th:if="${importeConIVA}"> (con IVA: <span th:text="${#numbers.formatDecimal(importeConIVA, 0, 'POINT', 2, 'COMMA')} + '€)'"/></span>
                                </li>
                                <li th:if="*{objeto}"><strong>Objeto: </strong><span th:text="*{objeto}"/>
                                </li>
                                <li th:if="*{duracion}"><strong>Duración: </strong><span th:text="*{duracion} + ' días'"/>
                                </li>
                                <li th:if="*{#arrays.isEmpty(cpv)==false}"><strong>CPV: </strong>
                                    <ul th:each="a:*{cpv}"><li th:text="${a.titulo}"></li>
                                    </ul>
                                </li>
                                <li th:if="*{numLicitadores}"><strong>Licitadores: </strong><span th:text="*{numLicitadores}"/></li>
                                <li th:if="*{lotes.size()>0}">
                                    <strong>Lotes</strong>
                                    <ul th:each="lote : *{lotes}">
                                        <li>
                                            <ul>
                                                <li><b>Importe de licitación(sin I.V.A.):</b> <span th:if="${lote.importeLicitacionSinIVA!=null}" th:text="${#numbers.formatDecimal(lote.importeLicitacionSinIVA,3,'POINT',2,'COMMA')}+ ' €'"></span></li>
                                                <li><b>Importe de licitación(con I.V.A.):</b> <span th:if="${lote.importeLicitacionConIVA!=null}" th:text="${#numbers.formatDecimal(lote.importeLicitacionConIVA,3,'POINT',2,'COMMA')}+ ' €'"></span></li>
                                                <li><b>Estado:</b> <span th:if="${lote.status!=null}" th:text="${lote.status.title}"></span></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                            <div th:if="*{#arrays.isEmpty(cpv)==false}">
                                <div class="panel-heading" role="tab" id="relacionados-title">
                                    <h3 class="panel-title">
                                        <a role="button" data-toggle="collapse" href="#relacionados" aria-expanded="true" aria-controls="relacionados" class="btn-block">
                                            <span class="far fa-file-alt"></span> Contratos Relacionados
                                        </a>
                                    </h3>
                                </div>
                                <div class="relacionados collapse in" id="relacionados">
                                    <div th:if="*{cpv}">
                                        <h3>Contratos con mismo CPV:</h3>
                                        <ul>
                                            <th:block th:each="contratos:${contratosCpv}">
                                                <li th:if="${contratos.id} != *{id}"><a th:text="${contratos.title}" th:href="'/sede/servicio/contratacion-publica/' + ${contratos.id}"></a></li>
                                            </th:block>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="nomargin destacado text-right">
                            Descargar: <a href="https://www.zaragoza.es/sede/servicio/catalogo/147">Datos Abiertos</a>
                        </p>
                        <ul class="list-inline pull-right">
                            <li class="nopadding"><a th:href="${'/sede/servicio/contratacion-publica/contrato/' + id  + '.json'}">JSON</a> | </li>
                            <li class="nopadding"><a th:href="${'/sede/servicio/contratacion-publica/contrato/' + id  + '.xml'}">XML</a> | </li>
                            <li class="nopadding"><a th:href="${'/sede/servicio/contratacion-publica/contrato/' + id  + '.csv'}">CSV</a></li>
                        </ul>
                    </div>
                    <div class="col-md-12">
                        <ul class="timeline">
                            <li class="timeline-item">
                                <div class="timeline-badge primary"><i class="glyphicon glyphicon-check"></i></div>
                                <div class="timeline-panel">
                                    <div class="timeline-heading">
                                        <h4 class="timeline-title">Licitación</h4>
                                    </div>
                                    <div class="timeline-body">
                                        <th:block th:each="a:*{Anuncios}">
                                            <div th:if="${a.type.id !=10 and a.type.id !=11 and a.type.id !=14}">
                                                <p th:if="${a.type.id==2 or a.type.id==5 or a.type.id==6 or a.type.id==1 }">
                                                    <small class="text-muted"><i  class="glyphicon glyphicon-time" title="Fecha publicación"></i><span class="padding-l05em" th:text="${#dates.format(a.creationDate,'dd/MM/yyyy')}"></span></small>
                                                    <a th:text="${a.title}" th:href="${a.selladoTiempo}"></a>
                                                </p>
                                                <p th:if="${a.type.id==13 or a.type.id==3 or a.type.id==4 or a.type.id==8}">
                                                    <small class="text-muted"><i  class="glyphicon glyphicon-time" title="Fecha publicación"></i><span class="padding-l05em" th:text="${#dates.format(a.creationDate,'dd/MM/yyyy')}"></span></small>
                                                    <a th:text="${a.title}" th:href="${a.uri}"></a>
                                                </p>
                                                <p th:if="${a.type.id==9 or a.type.id==12 or a.type.id==19}">
                                                    <small class="text-muted"><i  class="glyphicon glyphicon-time" title="Fecha publicación"></i><span class="padding-l05em" th:text="${#dates.format(a.creationDate,'dd/MM/yyyy')}"></span></small>
                                                    <a th:text="${a.title}" th:href="${'anuncio/'+a.id}"></a>
                                                </p>
                                            </div>
                                        </th:block>
                                        <p th:if="${fechaPresentacion!=null}"><span class="fas fa-calendar-alt" title="Fecha publicación"></span><strong>Plazo de presentación:</strong><span  th:text="*{#dates.format(fechaPresentacion,'dd/MM/yyyy')}"></span> </p>
                                    </div>
                                </div>
                            </li>
                            <li th:unless="*{#lists.isEmpty(Ofertas)}" class="timeline-item">
                                <div class="timeline-badge success"><i class="glyphicon glyphicon-check"></i></div>
                                <div class="timeline-panel">
                                    <div class="timeline-heading">
                                        <h4 class="timeline-title">Adjudicación - Formalización</h4>
                                        <th:block th:each="c:*{Ofertas}">
                                            <p th:if="${c.ganador==true}">
                                            </p>
                                        </th:block>
                                    </div>
                                    <div class="timeline-body">
                                        <ul class="container-fluid">
                                            <li th:each="c:*{ofertas}">
                                                <th:block th:if="${c.ganador==true}" >
                                                    <p><i class="glyphicon glyphicon-time"></i>
                                                        <small class="text-muted" th:if="${c.fechaFormalizacion!= null and  c.fechaAdjudicacion!=null }" th:text="${#dates.format(c.fechaAdjudicacion,'dd/MM/yyyy')+'-'+#dates.format(c.fechaFormalizacion,'dd/MM/yyyy')}"> 11/07/2018 - 13/07/2018</small></p>
                                                    <th:block th:if="${c.lote !=null}" th:each="l :${c.lote}">
                                                        <p th:if="${l}"><strong th:text="${l.description}"></strong></p>
                                                    </th:block>
                                                    <span class="far fa-thumbs-up" title="Adjudicatario"></span>
                                                </th:block>
                                                <th:block th:each="e : ${c.Empresa}">
                                                    <a th:href="'/sede/servicio/contratacion-publica/licitador/'+${e.idEmpresa}"><span th:text="${e.nombre}"> Luis Daniel Ballesteros Jordán</span></a>
                                                </th:block>
                                                <p th:if="${c.importeSinIVA}"><strong>Importe: <span class="color-2" th:text="${#numbers.formatDecimal(c.importeSinIVA ,3, 'POINT', 2, 'COMMA')} + '€'"/><span th:if="${c.importeConIVA}" th:text="' (con IVA: ' + ${#numbers.formatDecimal(c.importeConIVA, 3, 'POINT', 2, 'COMMA')} + '€)'" /></strong></p>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </li>
                            <li th:if="*{duracion} != null and *{status.id !=0}" class="timeline-item">
                                <div class="timeline-badge info"><i class="glyphicon glyphicon-check"></i></div>
                                <div class="timeline-panel">
                                    <div class="timeline-heading">
                                        <h4 class="timeline-title">Ejecución</h4>
                                        <p><i class="glyphicon glyphicon-time"></i>  <strong>Duración: </strong><span th:text="*{duracion}+' días'">1460 días</span></p>
                                    </div>
                                    <!--//TODO FACTURAS-->
                                    <th:block th:each="c:*{Ofertas}">
                                        <span th:if="${c.ganador==true}">
                                            <div   th:if="${c.canon !=false}" class="alert alert-info" >Al ser canón el adjudicatario debe de pagar el importe de adjudicación a la entidad</div></span>
                                    </th:block>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </sede:content>
        <script type="text/javascript" th:inline="text">
            /*<![CDATA[*/
    $(document).ready(function() {
        $(".relacionados.collapse").collapse();
    });
  /*]]>*/
        </script>
    </body>
</html>
