<?xml version="1.0"encoding="ISO-8859-1"?><html xml:lang="es"version="-//W3C//DTD XHTML Basic 1.0//EN"><head><meta name="viewport"content="width=device-width, initial-scale=1.0, user-scalable=yes"><meta name="apple-mobile-web-app-capable"content="yes"><script type="text/javascript"language="javascript">document.write('<link rel="stylesheet" href="../style/home.css" />');</script><script type="text/javascript"language="javascript">document.write('<script type="text/javascript" language="javascript" src="../properties/messagesProperties_EN.js"></s'+'cript>');</script><link rel="schema.DC"href="http://purl.org/dc/elements/1.1/"></link><meta name="DC.title"content="Leyenda del visorPortada del portal web del Ayuntamiento de Zaragoza"/><meta name="DC.date"content="2006-06-12"/><meta name="DC.organization"content="Ayuntamiento de Zaragoza"/><meta name="DC.contributor"content="Concejalía de Ciencia y Tecnología. webmuncipal@ayto-zaragoza.es"/><meta name="DC.language"content="es"/><meta name="DC.description"content="Leyenda del visorPortada del portal web del Ayuntamiento de Zaragoza"/><meta name="DC.subject"content="callejero, leyenda"/><meta http-equiv="Content-Type"content="text/html; charset=iso-8859-1"/><script type="text/javascript"language="javascript">if(navigator.appVersion.indexOf("MSIE 6")>-1)
{document.write('<script defer type="text/javascript" src="pngfix.js"></s'+'cript>');}</script><script type="text/javascript"language="javascript">document.write('<title>'+messages["legendPageTitle"]+'</title>');function closeWindow(){if(window&&window.opener&&window.opener.mobileNavigator){if(window.opener.facade){window.opener.facade.habilitarRedimensionMapa();window.opener.scrollTo(0,0);}}}</script></head><body onUnload="closeWindow();"><div id="leyenda"><script type="text/javascript"language="javascript">document.write('<h2 class="img">'+messages["legendDocumentTitle"]+'</h2>');</script><script>var infoLeyendas=window.opener.getLegendInfo(true);var explorerNavigator=!window.opener.OpenLayers.IAAA_Utils.isNetscape();var columnsToFill;var categories=new Object();var categoryNext;var legendTagArray=new Array();if((infoLeyendas!=null)&&(infoLeyendas.layerNameList!=null)&&(infoLeyendas.nameList!=null)&&(infoLeyendas.iconsList!=null)){for(var indL=0,lenL=infoLeyendas.hierarchy.length;indL<lenL;indL++){categoryArray=infoLeyendas.hierarchy[indL].split("-");for(var catInd=0,catLen=categoryArray.length;catInd<catLen;catInd++){if(catInd==0){if((categories[categoryArray[catInd]]==null)||(categories[categoryArray[catInd]]==undefined)){if(catInd==catLen-1){categories[categoryArray[catInd]]=indL;}else{categories[categoryArray[catInd]]=new Object();}}
categoryNext=categories[categoryArray[catInd]];}else{if((categoryNext[categoryArray[catInd]]==null)||(categoryNext[categoryArray[catInd]]==undefined)){if(catInd==catLen-1){categoryNext[categoryArray[catInd]]=indL;}else{categoryNext[categoryArray[catInd]]=new Object();}}
categoryNext=categoryNext[categoryArray[catInd]];}}}
var tag="";var tagElementLength=0;var catLegendList;var liImageStyle="";if(!explorerNavigator){liImageStyle="padding-bottom:5px;"}else{liImageStyle="padding-bottom:3px; padding-top:2px;"}
function createLegendContentTag(categoryName,iconPath,description,link,level){var salto=false;var tag="";if(categoryName&&iconPath){tag+='<div class="lista'+level+'">'
tag+='<ul>';if((typeof(categoryName)).toLowerCase()=="string"){tag+='<li style="'+liImageStyle+'"><img heigth="20px" width="20px" alt="'+categoryName+'" src="'+iconPath+'" style="vertical-align: middle;"/>&#x0020;'+categoryName+'</li>';}else{for(var catIzIndex=0;catIzIndex<categoryName.length;catIzIndex++){if((typeof(iconPath)).toLowerCase!="string"){tag+='<li style="'+liImageStyle+'"><img heigth="20px" width="20px" alt="'+categoryName[catIzIndex]+'" src="'+iconPath[catIzIndex]+'" style="vertical-align: middle;"/>&#x0020;'+categoryName[catIzIndex]+'</li>';}else{tag+='<li style="'+liImageStyle+'"><img heigth="20px" width="20px" alt="'+categoryName[catIzIndex]+'" src="'+iconPath+'" style="vertical-align: middle;"/>&#x0020;'+categoryName[catIzIndex]+'</li>';}}}
tag+='</ul>';tag+='</div>';salto=true;}
if(description){if(salto){tag+='<br/>';}
tag+='<div class="descripcion'+level+'">'+description+'</div>';salto=true;}
if(link){if(salto){tag+='<br/>';}
tag+='<div class="link'+level+'">Para más información clickar '+'<a href="'+link+'" target="_blank"><i>aqui</i></a></div>';}
return tag;}
function leeLeyenda(obj,ind,level,parent){if(((typeof ind)=="string")&&(ind==messages["legendMiscGroup"])){tag+='<div class="categ'+level+'"><span class="catNivel'+level+'">'+ind+'</span></div>';tag+=createLegendContentTag(infoLeyendas.nameList[infoLeyendas.nameList.length-1],infoLeyendas.iconsList[infoLeyendas.iconsList.length-1],infoLeyendas.descriptionList[infoLeyendas.descriptionList.length-1],infoLeyendas.linkList[infoLeyendas.linkList.length-1],level);tagElementLength+=1;catLegendList.push(tag);tag="";}else{if(typeof obj[ind]=="number"){if(level>1){tag+='<div class="categ'+level+'"><span class="catNivel'+level+'">'+"- "+parent+". "+ind+'</span></div>';}else{tag+='<div class="categ'+level+'"><span class="catNivel'+level+'">'+ind+'</span></div>';}
tag+=createLegendContentTag(infoLeyendas.nameList[obj[ind]],infoLeyendas.iconsList[obj[ind]],infoLeyendas.descriptionList[obj[ind]],infoLeyendas.linkList[obj[ind]],level);if((typeof(infoLeyendas.nameList[obj[ind]])).toLowerCase()=="string"){tagElementLength+=1;}else{tagElementLength+=infoLeyendas.nameList[obj[ind]].length;}
catLegendList.push(tag);tag="";}else{if(level==0){tag+='<div class="categ'+level+'"><span class="catNivel'+level+'">'+ind+'</span></div>';}else{tag+='<div class="categ'+level+'"><span class="catNivel'+level+'">'+ind+'</span></div>';}
for(objInd in obj[ind]){if(parent!=""){leeLeyenda(obj[ind],objInd,level+1,ind);}else{leeLeyenda(obj[ind],objInd,level+1,""+parent+". "+ind);}}}}}
for(categoryInd in categories){tag="";tagElementLength=0;catLegendList=new Array();leeLeyenda(categories,categoryInd,0,"");legendTagArray.push(catLegendList);}
if(infoLeyendas.layerNameList[infoLeyendas.layerNameList.length-1]==messages["legendMiscGroup"]){tag="";catLegendList=new Array();leeLeyenda(categories,messages["legendMiscGroup"],0,"");legendTagArray.push(catLegendList);}
columnsToFill=new Array(infoLeyendas.columnNumber);if(infoLeyendas.layerNameList.length>0)
{for(var indC=0;indC<columnsToFill.length;indC++)
{columnsToFill[indC]=new Object();columnsToFill[indC].layerNames=new Array();columnsToFill[indC].names=new Array();columnsToFill[indC].icons=new Array();columnsToFill[indC].descriptions=new Array();columnsToFill[indC].links=new Array();columnsToFill[indC].tagList=new Array();columnsToFill[indC].legendCount=0;}
var col;var min=0;var balanced=true;for(var ind=0;ind<legendTagArray.length;ind++)
{if(!balanced){col=(ind%columnsToFill.length);columnsToFill[col].legendCount+=legendTagArray[ind].length;}else{min=0;for(var colInd=0,colLen=columnsToFill.length;colInd<colLen;colInd++){if(columnsToFill[colInd].legendCount<columnsToFill[min].legendCount){min=colInd;}}
col=min;columnsToFill[col].legendCount+=legendTagArray[ind].length;}
if(legendTagArray[ind].length==1){columnsToFill[col].tagList.push(legendTagArray[ind][0]);}else{for(var tagInd=0,tagLen=legendTagArray[ind].length;tagInd<tagLen;tagInd++){columnsToFill[col].tagList.push(legendTagArray[ind][tagInd]);}}}
document.write('<table><tbody>');var max=0;for(var c=0,cLen=columnsToFill.length;c<cLen;c++){if(columnsToFill[c].legendCount>columnsToFill[max].legendCount){max=c;}}
for(var rowInd=0;rowInd<columnsToFill[max].legendCount;rowInd++)
{document.write('<tr>');for(var indCol=0;indCol<columnsToFill.length;indCol++)
{document.write('<td valign="top" style="width: 31%; float:left; border: none;">');if(rowInd<columnsToFill[indCol].legendCount){document.write(columnsToFill[indCol].tagList[rowInd]);}else{document.write('<div>&nbsp</div>');}
document.write('</td>');}
document.write('</tr>');}
document.write('</tbody></table>');}
else
{document.write('<center>'+messages["legendNoInfo"]+'</center>');}}
else
{document.write('<center>'+messages["legendNoInfo"]+'</center>');}</script></div><!--fin leyenda--></body></html>